(this.webpackJsonpmacfeeauth0=this.webpackJsonpmacfeeauth0||[]).push([[0],{18:function(e,t,n){},28:function(e,t,n){},32:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(19),c=n.n(o),r=(n(28),n(2)),s=n(15),l=n.n(s),d=n(20),j=n(8),u=n(10),b=n(21),m=n(0),h=i.a.createContext({}),O=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],o=n[1],c=new b.a.WebAuth({domain:"dev-xl32ev2i.us.auth0.com",clientID:"9dR6Ug2BQQbmBMp6grHf1R962NBigRxg",responseType:"token id_token",redirectUri:"http://localhost:3000/authorize"});return Object(m.jsx)(h.Provider,{value:{webAuth:c,otpStart:function(e){return new Promise((function(t,n){var a={email:e,connection:"email",send:"code"};c.passwordlessStart(a,(function(e,a){e?(console.log(e),n(e)):t(a)}))}))},otpLogin:function(e,t){return new Promise((function(n,a){c.passwordlessLogin({email:e,connection:"email",verificationCode:t},(function(e,t){e?a(e):(window.origin=window.location.origin,n(t))}))}))},loginWithPassword:function(e,t){return new Promise((function(n,a){c.login({realm:"Username-Password-Authentication",username:e,password:t},(function(e,t){e?a(e):t&&(window.origin=window.location.origin,n(t))}))}))},AuthenticateUser:function(e){localStorage.setItem("auth_token",e),o(!0)},storeUserData:function(e){localStorage.setItem("userData",JSON.stringify(e))},isAuthenticated:i},children:e.children})};function g(e){var t=Object(a.useContext)(h),n=t.loginWithPassword,o=t.otpLogin,c=t.otpStart,s=Object(a.useState)({email:"",password:"",otp:"",otpAvailable:!1,isSubmitting:!1}),b=Object(u.a)(s,2),m=b[0],O=b[1],g=Object(a.useState)({email:"",isEmailError:"",databaseError:""}),p=Object(u.a)(g,2),x=p[0],v=p[1],f=Object(a.useState)(!1),w=Object(u.a)(f,2),C=w[0],E=w[1],N=Object(a.useState)(!1),S=Object(u.a)(N,2),L=S[0],k=S[1],A=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},I=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),C){e.next=16;break}return e.prev=2,e.next=5,n(m.email,m.password);case 5:a=e.sent,v(Object(r.a)(Object(r.a)({},x),{},{databaseError:""})),console.log(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),v(Object(r.a)(Object(r.a)({},x),{},{databaseError:e.t0.description}));case 14:e.next=36;break;case 16:if(e.prev=16,!m.otpAvailable){e.next=25;break}return console.log(m.otp,"otp"),e.next=21,o(m.email,m.otp);case 21:i=e.sent,console.log(i,"ankit"),e.next=30;break;case 25:return e.next=27,c(m.email);case 27:s=e.sent,console.log("enter here",s),O(Object(r.a)(Object(r.a)({},m),{},{otpAvailable:!0}));case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(16),console.log(e.t1),v(Object(r.a)(Object(r.a)({},x),{},{databaseError:e.t1.description}));case 36:case"end":return e.stop()}}),e,null,[[2,10],[16,32]])})));return function(t){return e.apply(this,arguments)}}(),y=i.a.Children.only(e.children);return i.a.cloneElement(y,{onChange:function(e){O(Object(r.a)(Object(r.a)({},m),{},Object(j.a)({},e.target.name,e.target.value))),function(e){switch(e.target.name){case"email":e.target.value?e.target.value&&!A(e.target.value)?v(Object(r.a)(Object(r.a)({},x),{},Object(j.a)({isEmailError:!0},e.target.name,"Email is not valid"))):v(Object(r.a)(Object(r.a)({},x),{},Object(j.a)({isEmailError:!1},e.target.name,""))):v(Object(r.a)(Object(r.a)({},x),{},Object(j.a)({isEmailError:!0},e.target.name,"Email is required")))}}(e)},onToggle:function(){E(!C),v(Object(r.a)(Object(r.a)({},x),{},{email:"",databaseError:""}))},switchLogin:C,onSubmit:I,LoginForm:m,LoginError:x,Continue:L,onPressContinue:function(){k(!0)},validateEmail:A})}n(18);var p=function(e){var t=e.onChange,n=e.switchLogin,a=e.onSubmit,i=e.LoginError,o=e.LoginForm,c=e.onToggle,r=e.Continue,s=e.onPressContinue,l=e.validateEmail;return Object(m.jsxs)("div",{className:"LoginWrapperContainer",children:[Object(m.jsxs)("form",{className:"InputWrapper",children:[Object(m.jsx)("div",{className:"InputLabel",children:"Email Address"}),Object(m.jsx)("input",{type:"email",id:"email",name:"email",value:o.email,placeholder:"johndoe@domain.com",className:"Input",onChange:t,style:{border:!0===i.isEmailError?"2px solid red":!1===i.isEmailError?"2px solid green":""}}),i.email&&Object(m.jsx)("div",{className:"Error",children:i.email}),r&&!n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"InputLabel",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"********",className:"Input",onChange:t})]}),r&&n&&o.otpAvailable&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"InputLabel",children:"one-time passcode"}),Object(m.jsx)("input",{id:"otp",name:"otp",className:"Input",onChange:t})]}),!r&&Object(m.jsx)("button",{className:"RequestOtp",onClick:s,disabled:!l(o.email),style:{backgroundColor:l(o.email)?"":"grey"},children:Object(m.jsx)("div",{children:"Continue"})}),r&&Object(m.jsx)("button",{className:"RequestOtp",onClick:a,children:n?o.otpAvailable?Object(m.jsx)("div",{children:"Sign in"}):Object(m.jsx)("div",{children:"Request one-time passcode"}):Object(m.jsx)("div",{children:"Sign in"})})]}),Object(m.jsx)("div",{className:"Error",children:i.databaseError}),r&&Object(m.jsxs)("div",{className:"SwitchContainer",children:[Object(m.jsx)("div",{className:"Switch",children:"OR"}),Object(m.jsx)("button",{className:"SwitchBtn",onClick:c,children:n?Object(m.jsx)("div",{children:"Sign in with password"}):Object(m.jsx)("div",{children:"Sign in with a one-time passcode"})})]})]})},x=function(e){var t=e.onChange,n=e.switchLogin,a=e.onToggle,i=e.onSubmit,o=e.LoginError,c=e.LoginForm,r=e.Continue,s=e.onPressContinue,l=e.validateEmail;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"LoginContainer",children:[Object(m.jsx)("div",{className:"LeftWrapper",children:Object(m.jsxs)("div",{className:"WelcomeContainer",children:[Object(m.jsx)("div",{className:"Logo",children:"McAfee"}),Object(m.jsx)("div",{className:"Intro",children:"Welcome back to McAfee !"}),r?Object(m.jsx)("div",{className:"IntroSubHeading",children:"Choose your sign in method to continue."}):Object(m.jsx)("div",{className:"IntroSubHeading",children:"Enter your email address so we can find your account."})]})}),Object(m.jsx)("div",{className:"RightWrapper",children:Object(m.jsx)(p,{LoginError:o,onChange:t,switchLogin:n,onSubmit:i,LoginForm:c,onToggle:a,onPressContinue:s,Continue:r,validateEmail:l})})]})})},v=function(e){return Object(m.jsx)(g,Object(r.a)(Object(r.a)({},e),{},{children:Object(m.jsx)(x,{})}))},f=n(14),w=n(3),C=(n(32),function(){var e=JSON.parse(localStorage.getItem("userData"));return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"DashboardContainer",children:[Object(m.jsx)("div",{className:"DashBoardHeading",children:"Welcome to DashBoard... "}),Object(m.jsx)("div",{className:"UserImg",style:{backgroundImage:"url(".concat(null===e||void 0===e?void 0:e.picture,")")}}),Object(m.jsx)("div",{className:"UserName",children:e.name})]})})}),E=function(e){return Object(m.jsx)(C,{})},N=function(){var e=Object(a.useContext)(h),t=e.isAuthenticated,n=e.storeUserData,i=e.AuthenticateUser,o=e.webAuth;return Object(a.useEffect)((function(){window.location.hash&&o.parseHash({hash:window.location.hash},(function(e,t){if(e)return console.log(e),void localStorage.clear();var a=t.idTokenPayload,o=a.email,c=a.name,r=a.picture,s=a.sub;n({email:o,name:c,picture:r,id:s}),i(t.idToken)}))}),[]),t?Object(m.jsx)(w.a,{to:"/dashboard"}):Object(m.jsx)("div",{children:"Loading...."})},S=function(){return Object(m.jsx)(f.a,{children:Object(m.jsx)(O,{children:Object(m.jsxs)(w.d,{children:[Object(m.jsx)(w.b,{exact:!0,path:"/login",component:v}),Object(m.jsx)(w.b,{exact:!0,path:"/authorize",component:N}),Object(m.jsx)(w.b,{exact:!0,path:"/dashboard",component:E})]})})})};var L=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(S,{})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),o(e),c(e)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root")),k()}},[[40,1,2]]]);
//# sourceMappingURL=main.f7a8898a.chunk.js.map